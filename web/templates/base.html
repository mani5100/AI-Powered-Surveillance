<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Surveillance System{% endblock %}</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    
    <!-- Navigation Bar -->
    <nav class="bg-slate-800 text-white shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-4">
                <!-- Logo/Brand -->
                <div class="flex items-center space-x-3">
                    <i class="fas fa-shield-alt text-2xl text-blue-400"></i>
                    <span class="text-xl font-bold">Security Surveillance</span>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex space-x-6">
                    <a href="/" class="nav-link hover:text-blue-400 transition">
                        <i class="fas fa-home mr-2"></i>Dashboard
                    </a>
                    <a href="/events" class="nav-link hover:text-blue-400 transition">
                        <i class="fas fa-images mr-2"></i>Events
                    </a>
                    <a href="/statistics" class="nav-link hover:text-blue-400 transition">
                        <i class="fas fa-chart-bar mr-2"></i>Statistics
                    </a>
                    <a href="/controls" class="nav-link hover:text-blue-400 transition">
                        <i class="fas fa-cog mr-2"></i>Controls
                    </a>
                </div>
                
                <!-- Mobile menu button -->
                <button id="mobile-menu-btn" class="md:hidden text-white">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="/" class="block py-2 hover:bg-slate-700 px-4 rounded">
                    <i class="fas fa-home mr-2"></i>Dashboard
                </a>
                <a href="/events" class="block py-2 hover:bg-slate-700 px-4 rounded">
                    <i class="fas fa-images mr-2"></i>Events
                </a>
                <a href="/statistics" class="block py-2 hover:bg-slate-700 px-4 rounded">
                    <i class="fas fa-chart-bar mr-2"></i>Statistics
                </a>
                <a href="/controls" class="block py-2 hover:bg-slate-700 px-4 rounded">
                    <i class="fas fa-cog mr-2"></i>Controls
                </a>
            </div>
        </div>
    </nav>
    
    <!-- Notification Container -->
    <div class="fixed top-20 right-4 z-50 max-w-md">
        <!-- Clear All Button (shown when notifications exist) -->
        <div id="notification-header" class="hidden mb-2 flex justify-end">
            <button onclick="notificationManager.clearAllNotifications()" 
                class="bg-white hover:bg-gray-100 text-gray-700 text-xs font-semibold px-3 py-1 rounded-lg shadow-md border border-gray-300 transition-colors">
                <i class="fas fa-times-circle mr-1"></i>Clear All
            </button>
        </div>
        <div id="notification-container" class="space-y-2">
            <!-- Notifications will be inserted here by JavaScript -->
        </div>
    </div>
    
    <!-- SSE Connection Status Indicator -->
    <div class="fixed bottom-4 left-4 z-40 bg-white rounded-lg shadow-md px-3 py-2 flex items-center space-x-2">
        <div id="sse-status-indicator" class="w-2 h-2 rounded-full bg-gray-400" title="Initializing..."></div>
        <span class="text-xs text-gray-600">Live Updates</span>
    </div>
    
    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-slate-800 text-white mt-auto">
        <div class="container mx-auto px-4 py-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Project Info -->
                <div>
                    <h3 class="font-bold text-lg mb-2">About</h3>
                    <p class="text-gray-300 text-sm">
                        AI-Powered Security Surveillance System using YOLO object detection 
                        and GPT-4 Vision for real-time threat analysis.
                    </p>
                </div>
                
                <!-- Technologies -->
                <div>
                    <h3 class="font-bold text-lg mb-2">Technologies</h3>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li><i class="fas fa-check text-green-400 mr-2"></i>YOLOv8 Object Detection</li>
                        <li><i class="fas fa-check text-green-400 mr-2"></i>OpenAI GPT-4 Vision</li>
                        <li><i class="fas fa-check text-green-400 mr-2"></i>Flask Web Framework</li>
                        <li><i class="fas fa-check text-green-400 mr-2"></i>Tailwind CSS</li>
                    </ul>
                </div>
                
                <!-- Student Info -->
                <div>
                    <h3 class="font-bold text-lg mb-2">Final Year Project</h3>
                    <p class="text-gray-300 text-sm">
                        Developed by: <span class="font-semibold">Abdul</span><br>
                        Year: <span class="font-semibold">2025</span><br>
                        <span class="text-xs text-gray-400">Raspberry Pi Implementation</span>
                    </p>
                </div>
            </div>
            
            <div class="border-t border-slate-700 mt-6 pt-4 text-center text-gray-400 text-sm">
                <p>&copy; 2025 Security Surveillance System. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Common JavaScript -->
    <script src="/static/js/notifications.js"></script>
    
    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });
        
        // Highlight active nav link
        const currentPath = window.location.pathname;
        document.querySelectorAll('.nav-link').forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('text-blue-400', 'font-semibold');
            }
        });
    </script>
    
    {% block extra_scripts %}{% endblock %}
</body>
</html>
